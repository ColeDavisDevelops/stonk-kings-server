(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{333:function(e,t,a){e.exports=a(473)},473:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(24),l=a.n(o),c=a(19),i=a(17),s=a(26),u=a(25),d=a(38),m=a(34),p=a(35),h=a(11),g=function(e){return{type:"FETCH_USER_INFORMATION_SUCCESS",payload:{userInfo:e}}},E=function(e){return{type:"FETCH_USER_INFORMATION_FAILURE",payload:{err:e}}},b=function(e){return function(t){return t({type:"FETCH_USER_INFORMATION_BEGIN"}),fetch("http://localhost:3000/api/auth/loginWithToken",{method:"GET",headers:{"x-access-token":e}}).then((function(e){return e.json()})).then((function(e){return t(g(e)),localStorage.token=e.accessToken,localStorage.userId=e.id,e})).catch((function(e){return t(E(e))}))}},f=a(541),y=a(94),v=a(287),T=a.n(v),C=a(288),O=a.n(C),S=a(289),k=a.n(S),N=a(81),w=function(){return r.a.createElement(y.a,{variant:"body2",style:{color:"white"},align:"center"},"Copyright \xa9 ","Stonk Kings",(new Date).getFullYear(),".")},I=Object(N.a)((function(e){return{footer:{padding:e.spacing(4),maxWidth:"100%",marginTop:20,backgroundColor:e.palette.primary.dark},icon:{color:e.palette.text.secondary,width:"100%"}}})),j=function(){var e=I();return r.a.createElement(r.a.Fragment,null,r.a.createElement("footer",{className:e.footer},r.a.createElement(f.a,{container:!0,xs:12},r.a.createElement(f.a,{item:!0,xs:4},r.a.createElement(T.a,{className:e.icon})),r.a.createElement(f.a,{item:!0,xs:4},r.a.createElement(O.a,{className:e.icon})),r.a.createElement(f.a,{item:!0,xs:4},r.a.createElement(k.a,{className:e.icon}))),r.a.createElement(y.a,{variant:"subtitle1",align:"center",style:{color:"white"},component:"p"},"Follow us on Social Media!"),r.a.createElement(w,null)))},x=a(14),F=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={countdown:"loading..."},e.countdown=function(){var t=(new Date).getTime(),a=e.props.countDownEnd-t,n=Math.floor(a/864e5),r=Math.floor(a%864e5/36e5),o=Math.floor(a%36e5/6e4),l=Math.floor(a%6e4/1e3);e.setState({countdown:"".concat(n," days, ").concat(r,":").concat(o,":").concat(l)}),a<0&&e.setState({countdown:e.props.overMsg})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=setInterval(this.countdown,1e3);this.setState({intervalId:e})}},{key:"componentWillUnmount",value:function(){console.log("unmounting"),clearInterval(this.state.intervalId)}},{key:"render",value:function(){return this.state.countdown}}]),a}(r.a.Component),P=a(547),R=a(617),B=a(548),_=a(544),A=a(546),M=a(542),D=a(609),L=a(543),U=a(614),H=a(545),Y=a(309);function W(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var G=[{id:"username",numeric:!1,disablePadding:!1,label:"Username"},{id:"numOfEntries",numeric:!0,disablePadding:!1,label:"Number of Entries"},{id:"wins",numeric:!0,disablePadding:!1,label:"Wins"},{id:"accountBalance",numeric:!0,disablePadding:!1,label:"Account Balance"}];function V(e){var t=e.classes,a=e.order,n=e.orderBy,o=(e.rowCount,e.onRequestSort);return r.a.createElement(M.a,null,r.a.createElement(L.a,{className:t.tableHead},G.map((function(e){return r.a.createElement(_.a,{key:e.id,align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:n===e.id&&a},r.a.createElement(U.a,{active:n===e.id,direction:n===e.id?a:"asc",onClick:(l=e.id,function(e){o(e,l)})},e.label,n===e.id?r.a.createElement("span",{className:t.visuallyHidden},"desc"===a?"sorted descending":"sorted ascending"):null));var l}))))}var q=Object(N.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},toolbar:{color:e.palette.text.secondary,backgroundColor:e.palette.primary.dark},title:{fontWeight:"bold",flexGrow:1},stonkKing:{fontWeight:"bold",color:e.palette.secondary.main,paddingRight:10}}})),z=function(){var e=q();return r.a.createElement(H.a,{className:e.toolbar},r.a.createElement(f.a,{container:!0,item:!0,alignItems:"flex-start",justify:"flex-end",direction:"row",xs:12},r.a.createElement(y.a,{style:{flexGrow:1},className:e.title,variant:"h4",id:"tableTitle",component:"div"},"Leaderboard"),r.a.createElement(y.a,{align:"right",className:e.stonkKing,variant:"h6",id:"tableTitle",component:"div"},"L33TPikachu"),r.a.createElement(R.a,{src:"https://i1.sndcdn.com/avatars-000547985256-ntiz46-t500x500.jpg"})))},J=Object(N.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},tableHead:{fontWeight:"bold",backgroundColor:e.palette.primary.main,color:e.palette.text.secondary},row:{fontWeight:"bold",color:e.palette.primary.dark},tablePagination:{color:e.palette.primary.dark}}})),K=function(e){var t=J(),a=r.a.useState("desc"),n=Object(x.a)(a,2),o=n[0],l=n[1],c=r.a.useState("accountBalance"),i=Object(x.a)(c,2),s=i[0],u=i[1],d=r.a.useState(0),m=Object(x.a)(d,2),p=m[0],h=m[1],g=r.a.useState(5),E=Object(x.a)(g,2),b=E[0],v=E[1],T=e.users.map((function(e){return console.log(e),{username:e.username,avatar:e.avatar,wins:e.wins,accountBalance:e.accountBalance,numOfEntries:e.entries.length}}));return r.a.createElement("div",{className:t.root},r.a.createElement(Y.a,{className:t.paper},r.a.createElement(z,null),r.a.createElement(A.a,null,r.a.createElement(P.a,{className:t.table,"aria-labelledby":"tableTitle","aria-label":"enhanced table"},r.a.createElement(V,{classes:t,order:o,orderBy:s,onRequestSort:function(e,t){l(s===t&&"asc"===o?"desc":"asc"),u(t)},rowCount:T.length}),r.a.createElement(B.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(T,function(e,t){return"desc"===e?function(e,a){return W(e,a,t)}:function(e,a){return-W(e,a,t)}}(o,s)).slice(p*b,p*b+b).map((function(e,a){return r.a.createElement(L.a,{hover:!0,role:"checkbox",tabIndex:-1,key:a},r.a.createElement(_.a,{className:t.row,component:"th",scope:"row"},r.a.createElement(f.a,{container:!0,alignItems:"flex-start",direction:"row"},r.a.createElement(R.a,{src:e.avatar}),r.a.createElement(y.a,{variant:"h5",style:{marginTop:10,paddingLeft:10}},e.username))),"Pikachu"===e.username?r.a.createElement(_.a,{className:t.row,align:"right"},"12"):r.a.createElement(_.a,{className:t.row,align:"right"},e.numOfEntries),r.a.createElement(_.a,{className:t.row,align:"right"},e.wins),r.a.createElement(_.a,{className:t.row,align:"right"},e.accountBalance))}))))),r.a.createElement(D.a,{className:t.tablePagination,rowsPerPageOptions:[5,10,25],component:"div",count:T.length,rowsPerPage:b,page:p,onChangePage:function(e,t){h(t)},onChangeRowsPerPage:function(e){v(parseInt(e.target.value,10)),h(0)}})))},$=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={users:[]},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:3000/api/users").then((function(e){return e.json()})).then((function(t){e.setState({users:t})}))}},{key:"render",value:function(){return console.log(this.state),r.a.createElement("div",{style:{padding:100}},r.a.createElement(K,{users:this.state.users}))}}]),a}(r.a.Component),Q=function(){return function(e){return e({type:"FETCH_TOURNAMENTS_BEGIN"}),fetch("http://localhost:3000/api/tournaments").then((function(e){return e.json()})).then((function(t){e(function(e){return{type:"FETCH_TOURNAMENTS_SUCCESS",payload:{tournamentsArr:e}}}(t))})).catch((function(t){return e(function(e){return{type:"FETCH_TOURNAMENTS_FAILURE",payload:{err:e}}}(t))}))}},X=a(185);function Z(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var ee=[{id:"name",numeric:!1,disablePadding:!1,label:"Tournament Name"},{id:"entryFee",numeric:!0,disablePadding:!1,label:"Entry Fee"},{id:"entries",numeric:!0,disablePadding:!1,label:"Entries"},{id:"totalPrize",numeric:!0,disablePadding:!1,label:"Total Prize"},{id:"start",numeric:!0,disablePadding:!1,label:"Start"},{id:"end",numeric:!0,disablePadding:!1,label:"End"},{id:"enter",numeric:!0,disablePadding:!1,label:"Enter"}];function te(e){var t=e.classes,a=e.order,n=e.orderBy,o=(e.rowCount,e.onRequestSort);return r.a.createElement(M.a,null,r.a.createElement(L.a,{className:t.tableHead},ee.map((function(e){return r.a.createElement(_.a,{key:e.id,align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:n===e.id&&a},r.a.createElement(U.a,{active:n===e.id,direction:n===e.id?a:"asc",onClick:(l=e.id,function(e){o(e,l)})},e.label,n===e.id?r.a.createElement("span",{className:t.visuallyHidden},"desc"===a?"sorted descending":"sorted ascending"):null));var l}))))}var ae=Object(N.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},toolbar:{color:e.palette.text.secondary,backgroundColor:e.palette.primary.dark},title:{fontWeight:"bold",flexGrow:1}}})),ne=function(){var e=ae();return r.a.createElement(H.a,{className:e.toolbar},r.a.createElement(y.a,{className:e.title,variant:"h4",id:"tableTitle",component:"div"},"My Tournaments"))},re=Object(N.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},tableHead:{fontWeight:"bold",backgroundColor:e.palette.primary.main,color:e.palette.text.secondary},row:{fontWeight:"bold",color:e.palette.primary.dark},tablePagination:{color:e.palette.primary.dark},enterButton:{backgroundColor:e.palette.secondary.main,color:e.palette.primary.dark,width:20,"&:hover":{backgroundColor:e.palette.text.primary}}}})),oe=function(e){var t=re(),a=r.a.useState("desc"),n=Object(x.a)(a,2),o=n[0],l=n[1],c=r.a.useState("start"),i=Object(x.a)(c,2),s=i[0],u=i[1],d=r.a.useState(0),p=Object(x.a)(d,2),h=p[0],g=p[1],E=r.a.useState(5),b=Object(x.a)(E,2),f=b[0],y=b[1],v=e.tournamentsArr.map((function(e){return{tournament:e,name:e.name,entryFee:e.entryFee,entries:e.entries.length,totalPrize:e.entryFee*e.entries.length,start:e.startTime,end:e.endTime}}));return r.a.createElement("div",{className:t.root},r.a.createElement(Y.a,{className:t.paper},r.a.createElement(ne,null),r.a.createElement(A.a,null,r.a.createElement(P.a,{className:t.table,"aria-labelledby":"tableTitle","aria-label":"enhanced table"},r.a.createElement(te,{classes:t,order:o,orderBy:s,onRequestSort:function(e,t){l(s===t&&"asc"===o?"desc":"asc"),u(t)},rowCount:v.length}),r.a.createElement(B.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(v,function(e,t){return"desc"===e?function(e,a){return Z(e,a,t)}:function(e,a){return-Z(e,a,t)}}(o,s)).slice(h*f,h*f+f).map((function(e,a){return r.a.createElement(L.a,{hover:!0,role:"checkbox",tabIndex:-1,key:a},r.a.createElement(_.a,{className:t.row,component:"th",scope:"row"},e.name),r.a.createElement(_.a,{className:t.row,align:"right"},e.entryFee),r.a.createElement(_.a,{className:t.row,align:"right"},e.entries),r.a.createElement(_.a,{className:t.row,align:"right"},e.totalPrize),r.a.createElement(_.a,{className:t.row,align:"right"},r.a.createElement(F,{className:t.row,countDownEnd:new Date(e.start).getTime(),overMsg:"Started!"})),r.a.createElement(_.a,{className:t.row,align:"right"},r.a.createElement(F,{className:t.row,countDownEnd:new Date(e.end).getTime(),overMsg:"Ended!"})),r.a.createElement(_.a,{className:t.row,align:"right"},r.a.createElement(X.a,{className:t.enterButton,variant:"outlined",autoFocus:!0,component:m.b,to:"/tournament/".concat(e.tournament.id)},"Enter")))}))))),r.a.createElement(D.a,{className:t.tablePagination,rowsPerPageOptions:[5,10,25],component:"div",count:v.length,rowsPerPage:f,page:h,onChangePage:function(e,t){g(t)},onChangeRowsPerPage:function(e){y(parseInt(e.target.value,10)),g(0)}})))},le=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={userTournaments:[]},e.getUserTournaments=function(){if(localStorage.userId){var t=[];return e.props.tournamentsArr.forEach((function(e){e.entries.forEach((function(a){a.user===localStorage.userId&&(console.log("found"),t.push(e))}))})),t}},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.getTournaments()}},{key:"render",value:function(){return console.log(this.getUserTournaments()),console.log(this.props.tournamentsArr),r.a.createElement("div",{style:{padding:100}},r.a.createElement(oe,{tournamentsArr:this.getUserTournaments()}))}}]),a}(r.a.Component),ce=Object(d.b)((function(e){return{tournamentsArr:e.tournament.tournamentsArr}}),{getTournaments:Q})(le),ie=a(31),se=a.n(ie),ue=a(76),de=a(5),me=a(552),pe=a(494),he=a(479),ge=a(478),Ee=a(553),be=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={entered:!1},e.handleSignUp=function(){e.props.handleEnter(e.props.tournamentInfo.id),e.setState({entered:!e.state.entered})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",null,this.props.tournamentInfo?r.a.createElement("div",null,r.a.createElement(pe.a,{open:this.props.open,onClose:this.props.handleModal},r.a.createElement(f.a,{className:t.dialogContainer,container:!0},r.a.createElement(f.a,{className:t.dialogTitle,container:!0,item:!0,xs:12},r.a.createElement(f.a,{item:!0,xs:6},r.a.createElement(me.a,{id:"simple-dialog-title"},this.props.tournamentInfo.name)),new Date(this.props.tournamentInfo.startTime)>new Date?r.a.createElement(f.a,{item:!0,xs:6},r.a.createElement(me.a,{className:t.timer,id:"simple-dialog-title"},"Starts: ",r.a.createElement(F,{countDownEnd:new Date(this.props.tournamentInfo.startTime).getTime(),overMsg:"Started!"}))):r.a.createElement(f.a,{item:!0,xs:6},new Date(this.props.tournamentInfo.endTime)>new Date?r.a.createElement(me.a,{className:t.timer,id:"simple-dialog-title"},"Ends: ",r.a.createElement(F,{countDownEnd:new Date(this.props.tournamentInfo.endTime).getTime(),overMsg:"Ended!"})):r.a.createElement(me.a,{className:t.timer,id:"simple-dialog-title"},"Tournament has ended."))),r.a.createElement(f.a,{item:!0,container:!0,xs:6},r.a.createElement(ge.a,{className:t.dialogContent},this.props.currentUser?r.a.createElement("div",null,r.a.createElement(f.a,{className:t.calcContainer,item:!0,xs:12},r.a.createElement(Ee.a,{className:t.calcTitle},"Your Credits:"),r.a.createElement(Ee.a,{className:t.dialogContent},this.props.currentUser.accountBalance)),r.a.createElement(f.a,{className:t.calcContainer,item:!0,xs:12},r.a.createElement(Ee.a,{className:t.calcTitle},"Entry Fee:"),r.a.createElement(Ee.a,{className:t.dialogContent},"- ",this.props.tournamentInfo.entryFee)),r.a.createElement(f.a,{className:t.calcContainer,item:!0,xs:12},r.a.createElement(Ee.a,{className:t.calcTitle},"Resulting Balance:"),r.a.createElement(Ee.a,{className:t.dialogContent},this.props.currentUser.accountBalance-this.props.tournamentInfo.entryFee))):r.a.createElement(Ee.a,null,"Please login!"))),r.a.createElement(f.a,{item:!0,container:!0,xs:6},r.a.createElement(ge.a,{className:t.dialogContent},r.a.createElement(f.a,{className:t.calcContainer,item:!0,xs:12},r.a.createElement(Ee.a,{className:t.calcTitle},"Entries:"),r.a.createElement(Ee.a,{className:t.dialogContent},this.props.tournamentInfo.entries?this.props.tournamentInfo.entries.length:null," / ",this.props.tournamentInfo.entryLimit)),r.a.createElement(f.a,{className:t.calcContainer,item:!0,xs:12},r.a.createElement(Ee.a,{className:t.calcTitle},"Total prize pool:"),r.a.createElement(Ee.a,{className:t.dialogContent},this.props.tournamentInfo.entries?this.props.tournamentInfo.entries.length*this.props.tournamentInfo.entryFee:null)))),r.a.createElement(f.a,{item:!0,xs:12},this.props.entered?r.a.createElement(he.a,null,r.a.createElement(X.a,{className:t.enterButton,variant:"contained",autoFocus:!0,component:m.b,to:"/tournament/".concat(this.props.tournamentInfo.id)},"Enter Tournament")):r.a.createElement(he.a,null,r.a.createElement(X.a,{className:t.cancelButton,autoFocus:!0,variant:"outlined",onClick:this.props.handleModal},"Cancel"),r.a.createElement(X.a,{className:t.signUpButton,onClick:function(){return e.handleSignUp()},color:"primary",autoFocus:!0},"Sign Up")))))):null)}}]),a}(r.a.Component),fe=Object(de.a)((function(e){return{timer:{textAlign:"right"},dialogTitle:{backgroundColor:e.palette.primary.dark},dialogContainer:{backgroundColor:e.palette.primary.light},dialogContent:{fontWeight:"bold",color:e.palette.primary.dark},calcContainer:{borderBottom:1,borderColor:"black",display:"flex"},calcTitle:{fontSize:18,fontWeight:"bold",color:e.palette.primary.dark,flexGrow:1},enterButton:{width:"100%",fontWeight:"bold",backgroundColor:e.palette.primary.dark,color:e.palette.text.secondary,"&:hover":{backgroundColor:e.palette.text.primary}},signUpButton:{backgroundColor:e.palette.text.primary,color:e.palette.primary.dark,"&:hover":{backgroundColor:e.palette.primary.dark,color:e.palette.text.secondary}},cancelButton:{backgroundColor:e.palette.primary.main}}}),{withTheme:!0})(be);function ye(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var ve=[{id:"name",numeric:!1,disablePadding:!1,label:"Tournament Name"},{id:"entryFee",numeric:!0,disablePadding:!1,label:"Entry Fee"},{id:"entries",numeric:!0,disablePadding:!1,label:"Entries"},{id:"totalPrize",numeric:!0,disablePadding:!1,label:"Total Prize"},{id:"start",numeric:!0,disablePadding:!1,label:"Start"},{id:"end",numeric:!0,disablePadding:!1,label:"End"}];function Te(e){var t=e.classes,a=e.order,n=e.orderBy,o=(e.rowCount,e.onRequestSort);return r.a.createElement(M.a,null,r.a.createElement(L.a,{className:t.tableHead},ve.map((function(e){return r.a.createElement(_.a,{style:{fontWeight:"bold"},key:e.id,align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:n===e.id&&a},r.a.createElement(U.a,{active:n===e.id,direction:n===e.id?a:"asc",onClick:(l=e.id,function(e){o(e,l)})},e.label,n===e.id?r.a.createElement("span",{className:t.visuallyHidden},"desc"===a?"sorted descending":"sorted ascending"):null));var l}))))}var Ce=Object(N.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},toolbar:{color:e.palette.text.secondary,backgroundColor:e.palette.primary.dark},title:{fontWeight:"bold",flexGrow:1}}})),Oe=function(e){var t=Ce();return r.a.createElement(H.a,{className:t.toolbar},r.a.createElement(y.a,{className:t.title,variant:"h4",id:"tableTitle",component:"div"},"LOBBY"))},Se=Object(N.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},tableHead:{backgroundColor:e.palette.primary.main,color:e.palette.text.secondary},row:{color:e.palette.primary.dark,fontWeight:"bold"},tablePagination:{fontWeight:"bold",color:e.palette.primary.dark}}})),ke=function(e){var t=Se(),a=r.a.useState("desc"),n=Object(x.a)(a,2),o=n[0],l=n[1],c=r.a.useState("start"),i=Object(x.a)(c,2),s=i[0],u=i[1],d=r.a.useState(0),m=Object(x.a)(d,2),p=m[0],h=m[1],g=r.a.useState(5),E=Object(x.a)(g,2),b=E[0],f=E[1];console.log(e);var y=e.tournamentsArr.map((function(e){return{tournament:e,name:e.name,entryFee:e.entryFee,entryLimit:e.entryLimit,entries:e.entries.length,totalPrize:e.entryFee*e.entries.length,start:e.startTime,end:e.endTime}}));return r.a.createElement("div",{className:t.root},r.a.createElement(Y.a,{className:t.paper},r.a.createElement(Oe,{tableHeader:e.tableHeader}),r.a.createElement(A.a,null,r.a.createElement(P.a,{className:t.table,"aria-labelledby":"tableTitle","aria-label":"enhanced table"},r.a.createElement(Te,{classes:t,order:o,orderBy:s,onRequestSort:function(e,t){l(s===t&&"asc"===o?"desc":"asc"),u(t)},rowCount:y.length}),r.a.createElement(B.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),console.log(a),a.map((function(e){return e[0]}))}(y,function(e,t){return"desc"===e?function(e,a){return ye(e,a,t)}:function(e,a){return-ye(e,a,t)}}(o,s)).slice(p*b,p*b+b).map((function(a,n){return r.a.createElement(L.a,{hover:!0,role:"checkbox",tabIndex:-1,key:n,onClick:function(){return e.handleClickTournamentRow(a.tournament)}},r.a.createElement(_.a,{className:t.row,component:"th",scope:"row"},a.name),r.a.createElement(_.a,{className:t.row,align:"right"},a.entryFee),r.a.createElement(_.a,{className:t.row,align:"right"},a.entries," / ",a.entryLimit),r.a.createElement(_.a,{className:t.row,align:"right"},a.totalPrize),r.a.createElement(_.a,{className:t.row,align:"right"},r.a.createElement(F,{className:t.row,countDownEnd:new Date(a.start).getTime(),overMsg:"Started!"})),r.a.createElement(_.a,{className:t.row,align:"right"},r.a.createElement(F,{className:t.row,countDownEnd:new Date(a.end).getTime(),overMsg:"Ended!"})))}))))),r.a.createElement(D.a,{className:t.tablePagination,rowsPerPageOptions:[5,10,25],component:"div",count:y.length,rowsPerPage:b,page:p,onChangePage:function(e,t){h(t)},onChangeRowsPerPage:function(e){f(parseInt(e.target.value,10)),h(0)}})))},Ne=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={tableHeader:"LOBBY",modalOpen:!1,entered:!1,tournamentClickedInfo:{}},e.handleEnter=function(){var t=Object(ue.a)(se.a.mark((function t(a){var n;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.createEntry(a,localStorage.token);case 2:return t.next=4,e.props.getTournaments();case 4:return t.next=6,e.props.loginWithToken(localStorage.token);case 6:n=e.props.tournamentsArr.find((function(t){return t.id===e.state.tournamentClickedInfo.id})),console.log("updated",n),e.handleClickTournamentRow(n);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleClickTournamentRow=function(t){var a=!1;t.entries.forEach((function(t){e.props.currentUser.entries.forEach((function(e){t._id===e&&(a=!0)}))})),e.setState({tournamentClickedInfo:t,entered:a,modalOpen:!0})},e.handleModal=function(){e.setState({modalOpen:!e.state.modalOpen})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.getTournaments()}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.mainContainer},r.a.createElement(fe,{entered:this.state.entered,handleModal:this.handleModal,open:this.state.modalOpen,tournamentInfo:this.state.tournamentClickedInfo,handleEnter:this.handleEnter,currentUser:this.props.currentUser}),r.a.createElement(ke,{tableHeader:this.props.mainTableHeader,tournamentsArr:this.props.tournamentsArr,handleClickTournamentRow:this.handleClickTournamentRow}))}}]),a}(r.a.Component),we=Object(d.b)((function(e){return{tournamentsArr:e.tournament.tournamentsArr,entryData:e.entry,currentUser:e.auth.currentUser}}),{getTournaments:Q,createEntry:function(e,t){return function(a){return a({type:"CREATE_ENTRY_BEGIN"}),fetch("http://localhost:3000/api/entries",{method:"POST",headers:{"Content-Type":"application/json","x-access-token":t},body:JSON.stringify({tournamentId:e})}).then((function(e){return e.json()})).then((function(e){return a(function(e){return{type:"CREATE_ENTRY_SUCCESS",payload:{entryInfo:e}}}(e)),e})).catch((function(e){console.log(e.body),a(function(e){return{type:"CREATE_ENTRY_FAILURE",payload:{err:e}}}(e))}))}},loginWithToken:b})(Object(de.a)((function(e){return{mainContainer:{padding:100},table:{backgroundColor:e.palette.text.secondary,minWidth:650},createButton:{marginBottom:20},tableHead:{backgroundColor:e.palette.primary.dark},tableCellHeader:{color:e.palette.text.secondary},tableCell:{color:e.palette.primary.dark},row:{textDecoration:"none"}}}),{withTheme:!0})(Ne)),Ie=a(44),je=a(555),xe=a(611),Fe=a(556),Pe=a(612),Re=a(554),Be=a(605),_e=a(290),Ae=a.n(_e);function Me(){return r.a.createElement(y.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(Re.a,{color:"inherit",href:"https://material-ui.com/"},"Stonk Kings")," ",(new Date).getFullYear(),".")}var De=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={signIn:!0},e.setSignIn=function(t){e.setState({signIn:t})},e.handleField=function(t){e.setState(Object(Ie.a)({},t.target.name,t.target.value))},e.handleLogin=Object(ue.a)(se.a.mark((function t(){return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.auth({username:e.state.username,password:e.state.password},"signIn");case 2:e.props.logIn(),e.props.history.push("/lobby");case 4:case"end":return t.stop()}}),t)}))),e.handleSignUp=Object(ue.a)(se.a.mark((function t(){return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.auth({username:e.state.username,password:e.state.password,email:e.state.email},"signUp");case 2:e.props.logIn(),e.props.history.push("/lobby");case 4:case"end":return t.stop()}}),t)}))),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return console.log(this.props),r.a.createElement(f.a,{container:!0,component:"main",className:t.root},r.a.createElement(je.a,null),r.a.createElement(f.a,{item:!0,xs:!1,sm:4,md:7,className:t.image}),r.a.createElement(f.a,{item:!0,xs:12,sm:8,md:5,component:Y.a,elevation:6,square:!0,className:t.mainContainer},r.a.createElement("div",{className:t.paper},r.a.createElement(y.a,{style:{marginBottom:100,fontWeight:"bold"},component:"h3",variant:"h1"},"Stonk Kings!"),r.a.createElement(R.a,{className:t.avatar},r.a.createElement(Ae.a,null)),r.a.createElement(y.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:t.form,noValidate:!0},r.a.createElement(xe.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"username",label:"Username",name:"username",onChange:this.handleField,InputLabelProps:{classes:{root:t.cssLabel,focused:t.cssFocused}},InputProps:{classes:{root:t.cssOutlinedInput,focused:t.cssFocused,notchedOutline:t.notchedOutline}}}),this.state.signIn?null:r.a.createElement(xe.a,{onChange:this.handleField,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",InputLabelProps:{classes:{root:t.cssLabel,focused:t.cssFocused}},InputProps:{classes:{root:t.cssOutlinedInput,focused:t.cssFocused,notchedOutline:t.notchedOutline}}}),r.a.createElement(xe.a,{onChange:this.handleField,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",InputLabelProps:{classes:{root:t.cssLabel,focused:t.cssFocused}},InputProps:{classes:{root:t.cssOutlinedInput,focused:t.cssFocused,notchedOutline:t.notchedOutline}}}),r.a.createElement(Fe.a,{control:r.a.createElement(Pe.a,{value:"remember",color:"secondary"}),label:"Remember me"}),this.state.signIn?r.a.createElement(X.a,{fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(){return e.handleLogin()}},"Sign In"):r.a.createElement(X.a,{fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(){return e.handleSignUp()}},"Sign up"),r.a.createElement(f.a,{container:!0},r.a.createElement(f.a,{item:!0},this.state.signIn?r.a.createElement(Re.a,{onClick:function(){return e.setSignIn(!1)},style:{color:"white"},variant:"body2"},"Don't have an account? Sign Up"):r.a.createElement(Re.a,{onClick:function(){return e.setSignIn(!0)},style:{color:"white"},variant:"body2"},"Already have an account? Sign in"))),r.a.createElement(Be.a,{mt:5},r.a.createElement(Me,null))))))}}]),a}(r.a.Component),Le=Object(d.b)(null,{auth:function(e,t){return function(a){return a({type:"FETCH_USER_INFORMATION_BEGIN"}),fetch("http://localhost:3000/api/auth/".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(h.a)({},e))}).then((function(e){return e.json()})).then((function(e){return a(g(e)),localStorage.token=e.accessToken,localStorage.userId=e.id,e})).catch((function(e){return a(E(e))}))}}})(Object(de.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://images.pexels.com/photos/189528/pexels-photo-189528.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},mainContainer:{backgroundColor:e.palette.primary.main},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{backgroundColor:e.palette.primary.dark,margin:e.spacing(3,0,2)},input:{"&$cssFocused $notchedOutline":{borderColor:"".concat(e.palette.text.primary," !important")}},cssOutlinedInput:{"&$cssFocused $notchedOutline":{borderColor:"".concat(e.palette.text.primary," !important")}},cssLabel:{color:"white"},cssFocused:{color:"white"},notchedOutline:{borderWidth:"1px",borderColor:"".concat(e.palette.primary.dark," !important")}}}),{withTheme:!0})(De)),Ue=function(e){return function(t){return t({type:"FETCH_TRADES_BY_ENTRY_BEGIN"}),fetch("http://localhost:3000/api/trades/".concat(e)).then((function(e){return e.json()})).then((function(e){t(function(e){return{type:"FETCH_TRADES_BY_ENTRY_SUCCESS",payload:{tradesByEntry:e}}}(e))})).catch((function(e){return t(function(e){return{type:"FETCH_TRADES_BY_ENTRY_FAILURE",payload:{err:e}}}(e))}))}},He=a(607),Ye=a(557),We=Object(N.a)((function(e){return{root:{backgroundColor:e.palette.primary.main},paper:{backgroundColor:e.palette.primary.main},popper:{backgroundColor:e.palette.primary.main},input:{backgroundColor:e.palette.primary.main},inputFocused:{backgroundColor:e.palette.primary.main},groupLabel:{backgroundColor:e.palette.primary.main,color:e.palette.text.secondary},option:{backgroundColor:e.palette.primary.main},inputRoot:{backgroundColor:e.palette.primary.main,"&.MuiFormLabel-root.Mui-focused":{color:e.palette.text.secondary}}}})),Ge=function(e){var t=We(),a=r.a.useState(!1),n=Object(x.a)(a,2),o=n[0],l=n[1],c=r.a.useState([]),i=Object(x.a)(c,2),s=i[0],u=i[1],d=o&&0===s.length;r.a.useEffect((function(){o||u([])}),[o]);return r.a.createElement(He.a,{classes:t,id:"asynchronous-demo",open:o,onOpen:function(){l(!0)},onClose:function(){l(!1)},getOptionSelected:function(e,t){return e.name===t.name},getOptionLabel:function(e){return e["2. name"]},options:s,loading:d,onInputChange:function(e,t){fetch("https://www.alphavantage.co/query?function=SYMBOL_SEARCH&keywords=".concat(t,"&apikey=3VP9375JIOYD1569")).then((function(e){return e.json()})).then((function(e){console.log(e.bestMatches),u(e.bestMatches||[]),console.log(s)})),console.log(e.currentTarget.value)},onChange:function(t,a){console.log(a),null!==a&&e.handleSearchSubmit(a["1. symbol"])},ListboxProps:{className:t.listBox},renderInput:function(e){return r.a.createElement(xe.a,Object.assign({},e,{label:"Search stocks...",variant:"outlined",name:"search",InputProps:Object(h.a)(Object(h.a)({},e.InputProps),{},{endAdornment:r.a.createElement(r.a.Fragment,null,d?r.a.createElement(Ye.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))}})},Ve=a(292),qe=Object(N.a)((function(e){return{stockInfo:{display:"inline-block"}}})),ze=function(e){qe();return r.a.createElement("div",{style:{height:400}},r.a.createElement(Ve.a,{theme:{grid:{line:{stroke:"grey"}},axis:{ticks:{text:{fill:"white"}},legend:{text:{fill:"white"}}},crosshair:{line:{stroke:"white"}}},data:e.data,margin:{top:50,right:50,bottom:50,left:60},xScale:{type:"time",format:e.xScaleFormat,precision:"minute"},xFormat:e.xFormat,yScale:{type:"linear",min:"auto",max:"auto",stacked:!1,reverse:!1},axisTop:null,axisRight:null,axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:"price",legendOffset:-40,legendPosition:"middle"},axisBottom:{format:"%b %d",tickSize:5,tickPadding:5,tickRotation:0,orient:"bottom",legendPosition:"middle",legend:"date",legendOffset:36},colors:["#64dd17"],pointSize:10,pointColor:{theme:"background"},pointBorderWidth:2,pointBorderColor:{from:"serieColor"},pointLabel:"y",pointLabelYOffset:-12,useMesh:!0}))},Je=Object(N.a)((function(e){return{dialogContainer:{backgroundColor:e.palette.primary.light},dialogHeader:{backgroundColor:e.palette.primary.dark},dialogTitle:{fontWeight:"bold",fontSize:30},dialogContent:{color:e.palette.primary.dark,fontSize:20,fontWeight:"bold",border:1,borderColor:e.palette.primary.dark},textFieldContainer:{paddingLeft:20},sharesField:{width:"60%",backgroundColor:e.palette.primary.main,borderRadius:5},sharesFieldInput:{padding:10,paddingLeft:20,fontSize:30,fontWeight:"bold"},button:{borderColor:e.palette.text.primary}}})),Ke=function(e){var t,a,n,o,l=Je();return r.a.createElement("div",null,r.a.createElement(pe.a,{open:e.open,onClose:e.handleModal,style:{opacity:10}},r.a.createElement(f.a,{className:l.dialogContainer,container:!0},r.a.createElement(f.a,{item:!0,container:!0,xs:12,className:l.dialogHeader},r.a.createElement(f.a,{item:!0,xs:6},"buy"===e.buyOrSell?r.a.createElement(me.a,{className:l.dialogTitle,id:"simple-dialog-title"},"Buy Transaction"):r.a.createElement(me.a,{style:{color:"red"},className:l.dialogTitle,id:"simple-dialog-title"},"Sell Transaction")),r.a.createElement(f.a,{container:!0,item:!0,alignItems:"flex-start",justify:"flex-end",direction:"row",xs:6},r.a.createElement(me.a,{className:l.dialogTitle,id:"simple-dialog-title"},e.stockTicker))),r.a.createElement(f.a,{item:!0,xs:6},r.a.createElement(ge.a,null,r.a.createElement(Ee.a,{className:l.dialogContent},"Price:"),r.a.createElement(Ee.a,{className:l.dialogContent},"Amount of shares:"),r.a.createElement(Ee.a,{className:l.dialogContent},"Total value:"),r.a.createElement(Ee.a,{className:l.dialogContent},"Resulting Balance:"))),r.a.createElement(f.a,{item:!0,xs:6},r.a.createElement(ge.a,null,r.a.createElement(Ee.a,{className:l.dialogContent},e.price),r.a.createElement(Ee.a,{className:l.dialogContent},e.amountOfShares),r.a.createElement(Ee.a,{className:l.dialogContent},(Math.round(e.amountOfShares*e.price*100)/100).toFixed(2)),r.a.createElement(Ee.a,{className:l.dialogContent},(t=e.buyOrSell,a=e.currentEntry.tournamentBalance,n=e.amountOfShares,o=e.price,"buy"===t?(100*Math.round(a-o*n)/100).toFixed(2):(100*Math.round(a+o*n)/100).toFixed(2))))),r.a.createElement(f.a,{item:!0,xs:12,className:l.textFieldContainer},r.a.createElement(xe.a,{defaultValue:1,className:l.sharesField,onChange:e.handleShareField,inputProps:{className:l.sharesFieldInput},name:"shareAmountField",type:"number",id:"standard-basic",label:"Amount of shares"})),r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(he.a,null,r.a.createElement(X.a,{onClick:e.handleModal,className:l.button,variant:"outlined",autoFocus:!0,color:"inherit"},"Cancel"),r.a.createElement(X.a,{onClick:e.handleTrade,className:l.button,variant:"outlined",color:"inherit",autoFocus:!0},"Confirm"))))))},$e=a(613),Qe=a(610);function Xe(e){return r.a.createElement(Qe.a,Object.assign({elevation:6,variant:"filled"},e))}var Ze=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={open:!1},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root},r.a.createElement($e.a,{open:this.props.open,autoHideDuration:6e3,onClose:this.props.handleClose,anchorOrigin:{horizontal:"right",vertical:"bottom"}},!0===this.props.error?r.a.createElement(Xe,{onClose:this.props.handleClose,severity:"error"},this.props.message):r.a.createElement(Xe,{onClose:this.props.handleClose,severity:"success"},this.props.message)))}}]),a}(r.a.Component),et=Object(de.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}),{withTheme:!0})(Ze),tt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={shareAmountField:1,openModal:!1,openSnackBar:!1},e.handleShareField=function(t){e.setState(Object(Ie.a)({},t.target.name,t.target.value))},e.handleModal=function(t){e.setState({openModal:!e.state.openModal,buyOrSell:t.currentTarget.name,shareAmountField:1})},e.handleCloseSnackBar=function(t,a){"clickaway"!==a&&e.setState({openSnackBar:!1})},e.handleClickSnackBar=function(){e.setState({openSnackBar:!0})},e.handleTrade=function(){var t=Object(ue.a)(se.a.mark((function t(a){return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(a.currentTarget.name),t.next=3,e.props.createTrade({entryId:e.props.entryId,stockTicker:e.props.stockTicker,time:new Date,buyOrSell:e.state.buyOrSell,price:e.props.currentPrice,amountOfShares:parseInt(e.state.shareAmountField)},localStorage.token);case 3:return t.next=5,e.props.getTradesByEntryId(e.props.entryId);case 5:return t.next=7,e.props.getCurrentEntry();case 7:e.handleModal(a),e.handleClickSnackBar();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.classes,t="",a=!1;if(this.props.createdTrade!==[])if(this.props.createdTrade.message)t=this.props.createdTrade.message,a=!0;else{var n="buy"===this.props.createdTrade.buyOrSell?"purchased":"sold";t="You ".concat(n," ").concat(this.props.createdTrade.amountOfShares," share(s) of ").concat(this.props.createdTrade.stockTicker," @ $").concat(this.props.createdTrade.price,"!")}return r.a.createElement("div",null,r.a.createElement(X.a,{onClick:this.handleModal,size:"large",name:"buy",variant:"outlined",className:e.buyButton},"BUY"),r.a.createElement(X.a,{onClick:this.handleModal,size:"large",name:"sell",variant:"outlined",className:e.sellButton},"SELL"),r.a.createElement(Ke,{handleShareField:this.handleShareField,handleTrade:this.handleTrade,handleModal:this.handleModal,price:this.props.currentPrice,stockTicker:this.props.stockTicker,amountOfShares:parseInt(this.state.shareAmountField),buyOrSell:this.state.buyOrSell,open:this.state.openModal,currentEntry:this.props.currentEntry}),r.a.createElement(et,{handleClose:this.handleCloseSnackBar,open:this.state.openSnackBar,message:t,error:a}))}}]),a}(r.a.Component),at=Object(d.b)(null,{createTrade:function(e,t){return function(a){return console.log("tradeObj",e),a({type:"CREATE_TRADE_BEGIN"}),fetch("http://localhost:3000/api/trades",{method:"POST",headers:{"Content-Type":"application/json","x-access-token":t},body:JSON.stringify({entryId:e.entryId,stockTicker:e.stockTicker,time:e.time,buyOrSell:e.buyOrSell,price:e.price,amountOfShares:e.amountOfShares})}).then((function(e){return e.json()})).then((function(e){return a(function(e){return{type:"CREATE_TRADE_SUCCESS",payload:{tradeInfo:e}}}(e)),e})).catch((function(e){return a(function(e){return{type:"CREATE_TRADE_FAILURE",payload:{err:e}}}(e))}))}},getTradesByEntryId:Ue})(Object(de.a)((function(e){return{buyButton:{width:"30%",padding:8,marginRight:10,backgroundColor:e.palette.text.primary,borderColor:e.palette.text.primary,color:e.palette.primary.dark,"&:hover":{color:e.palette.text.primary,backgroundColor:e.palette.primary.main}},sellButton:{width:"30%",padding:8,marginRight:10,backgroundColor:"red",borderColor:"red",color:e.palette.primary.dark,"&:hover":{color:"red",backgroundColor:e.palette.primary.main}},sharesField:{backgroundColor:e.palette.primary.main,borderRadius:5},sharesFieldInput:{fontSize:30}}}),{withTheme:!0})(tt)),nt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).fetchPrice=function(){console.log(e.props.searchString),fetch("https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=".concat(e.props.searchString,"&apikey=3VP9375JIOYD1569")).then((function(e){return e.json()})).then((function(t){console.log(t),e.props.setPrice(t["Global Quote"]["05. price"])}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=setInterval(this.fetchPrice,1e3);this.setState({intervalId:e})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.intervalId)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(y.a,{variant:"h5"},"Current Price"),r.a.createElement(y.a,{variant:"h6"},"$",this.props.currentPrice))}}]),a}(r.a.Component);function rt(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var ot=[{id:"ticker",numeric:!1,disablePadding:!1,label:"Ticker Symbol"},{id:"averagePrice",numeric:!1,disablePadding:!1,label:"Average Price"},{id:"netShares",numeric:!1,disablePadding:!1,label:"Net Shares"}];function lt(e){var t=e.classes,a=e.order,n=e.orderBy,o=(e.rowCount,e.onRequestSort);return r.a.createElement(M.a,null,r.a.createElement(L.a,{className:t.tableHead},ot.map((function(e){return r.a.createElement(_.a,{key:e.id,align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:n===e.id&&a},r.a.createElement(U.a,{active:n===e.id,direction:n===e.id?a:"asc",onClick:(l=e.id,function(e){o(e,l)})},e.label,n===e.id?r.a.createElement("span",{className:t.visuallyHidden},"desc"===a?"sorted descending":"sorted ascending"):null));var l}))))}var ct=Object(N.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},tableHead:{fontWeight:"bold",backgroundColor:e.palette.primary.main,color:e.palette.text.secondary,width:"100%"},row:{fontWeight:"bold",color:e.palette.primary.dark},tablePagination:{color:e.palette.primary.dark}}})),it=function(e){var t=ct(),a=r.a.useState("asc"),n=Object(x.a)(a,2),o=n[0],l=n[1],c=r.a.useState("entryFee"),i=Object(x.a)(c,2),s=i[0],u=i[1],d=r.a.useState(0),m=Object(x.a)(d,2),p=m[0],h=m[1],g=r.a.useState(5),E=Object(x.a)(g,2),b=E[0],f=E[1],y=!1,v=e.tradeData.tradesByEntry.map((function(e){return e.stockTicker})).filter((function(e,t,a){return a.indexOf(e)===t})).map((function(t){var a={ticker:t,netShares:0,averagePrice:0},n=0,r=0;return e.tradeData.tradesByEntry.forEach((function(e){e.stockTicker===t&&("buy"===e.buyOrSell?(n+=e.amountOfShares*e.price,r+=e.amountOfShares,a.netShares=a.netShares+e.amountOfShares):a.netShares=a.netShares-e.amountOfShares)})),a.averagePrice=n/r,a.netShares>0&&(y=!0),a})).filter((function(e){if(e.netShares>0)return{ticker:e.ticker,netShares:e.netShares,averagePrice:(Math.round(100*e.averagePrice)/100).toFixed(2)}}));return r.a.createElement("div",null,y?r.a.createElement("div",{className:t.root},r.a.createElement(Y.a,{className:t.paper},r.a.createElement(A.a,null,r.a.createElement(P.a,{className:t.table,"aria-labelledby":"tableTitle","aria-label":"enhanced table"},r.a.createElement(lt,{classes:t,order:o,orderBy:s,onRequestSort:function(e,t){l(s===t&&"asc"===o?"desc":"asc"),u(t)},rowCount:v.length}),r.a.createElement(B.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(v,function(e,t){return"desc"===e?function(e,a){return rt(e,a,t)}:function(e,a){return-rt(e,a,t)}}(o,s)).slice(p*b,p*b+b).map((function(e,a){return r.a.createElement(L.a,{hover:!0,role:"checkbox",tabIndex:-1,key:a},r.a.createElement(_.a,{className:t.row,component:"th",scope:"row"},e.ticker),r.a.createElement(_.a,{className:t.row,align:"left"},e.averagePrice.toFixed(2)),r.a.createElement(_.a,{className:t.row,align:"left"},e.netShares))}))))),r.a.createElement(D.a,{className:t.tablePagination,rowsPerPageOptions:[5,10,25],component:"div",count:v.length,rowsPerPage:b,page:p,onChangePage:function(e,t){h(t)},onChangeRowsPerPage:function(e){f(parseInt(e.target.value,10)),h(0)}}))):null)},st=a(602),ut=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",{className:t.root},r.a.createElement(st.a,{position:"static",color:"secondary"},r.a.createElement(H.a,null,r.a.createElement(y.a,{onClick:function(){return e.props.setView("buy/sell")},variant:"h6",color:"inherit",className:t.title},"Buy/Sell"),r.a.createElement(y.a,{onClick:function(){return e.props.setView("tradeHistory")},variant:"h6",color:"inherit",className:t.title},"Trade History"),r.a.createElement(y.a,{onClick:function(){return e.props.setView("allEntrants")},variant:"h6",color:"inherit",style:{flexGrow:1},className:t.title},"All Entrants"),this.props.currentEntry&&!this.props.currentEntry.message?r.a.createElement(y.a,{component:m.b,to:"/",variant:"h6",color:"inherit",className:t.title},"Tournament Balance: ",this.props.currentEntry.tournamentBalance.toFixed(2)):null)))}}]),a}(r.a.Component),dt=Object(d.b)((function(e){return{currentEntry:e.entry.currentEntry,currentUser:e.auth.currentUser}}))(Object(de.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{textDecoration:"none",marginRight:30}}}),{withTheme:!0})(ut));function mt(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var pt=[{id:"ticker",numeric:!1,disablePadding:!1,label:"Ticker Symbol"},{id:"timeTraded",numeric:!1,disablePadding:!1,label:"Time of Trade"},{id:"buyOrSell",numeric:!1,disablePadding:!1,label:"Transaction Type"},{id:"numOfShares",numeric:!0,disablePadding:!1,label:"# of Shares"},{id:"price",numeric:!0,disablePadding:!1,label:"Price"}];function ht(e){var t=e.classes,a=e.order,n=e.orderBy,o=(e.rowCount,e.onRequestSort);return r.a.createElement(M.a,null,r.a.createElement(L.a,{className:t.tableHead},pt.map((function(e){return r.a.createElement(_.a,{key:e.id,align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:n===e.id&&a},r.a.createElement(U.a,{active:n===e.id,direction:n===e.id?a:"asc",onClick:(l=e.id,function(e){o(e,l)})},e.label,n===e.id?r.a.createElement("span",{className:t.visuallyHidden},"desc"===a?"sorted descending":"sorted ascending"):null));var l}))))}var gt=Object(N.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},tableHead:{fontWeight:"bold",backgroundColor:e.palette.primary.main,color:e.palette.text.secondary,width:"100%"},row:{fontWeight:"bold",color:e.palette.primary.dark},tablePagination:{color:e.palette.primary.dark}}})),Et=function(e){var t=gt(),a=r.a.useState("asc"),n=Object(x.a)(a,2),o=n[0],l=n[1],c=r.a.useState("timeTraded"),i=Object(x.a)(c,2),s=i[0],u=i[1],d=r.a.useState(0),m=Object(x.a)(d,2),p=m[0],h=m[1],g=r.a.useState(5),E=Object(x.a)(g,2),b=E[0],f=E[1],y=e.data.map((function(e){var t=function(e){var t=e.getHours(),a=e.getMinutes(),n=t>=12?"pm":"am",r=(t=(t%=12)||12)+":"+(a=a<10?"0"+a:a)+" "+n;return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()+"  "+r}(new Date(e.time));return{ticker:e.stockTicker,timeTraded:t,buyOrSell:e.buyOrSell,amountOfShares:parseFloat(e.amountOfShares),price:e.price}}));return r.a.createElement("div",{className:t.root},r.a.createElement(Y.a,{className:t.paper},r.a.createElement(A.a,null,r.a.createElement(P.a,{className:t.table,"aria-labelledby":"tableTitle","aria-label":"enhanced table"},r.a.createElement(ht,{classes:t,order:o,orderBy:s,onRequestSort:function(e,t){l(s===t&&"asc"===o?"desc":"asc"),u(t)},rowCount:y.length}),r.a.createElement(B.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(y,function(e,t){return"desc"===e?function(e,a){return mt(e,a,t)}:function(e,a){return-mt(e,a,t)}}(o,s)).slice(p*b,p*b+b).map((function(e,a){return r.a.createElement(L.a,{hover:!0,role:"checkbox",tabIndex:-1,key:a},r.a.createElement(_.a,{className:t.row,component:"th",scope:"row"},e.ticker),r.a.createElement(_.a,{className:t.row},e.timeTraded),"buy"===e.buyOrSell?r.a.createElement(_.a,{style:{color:"green"},className:t.row},"Bought"):r.a.createElement(_.a,{style:{color:"red"},className:t.row},"Sold"),r.a.createElement(_.a,{className:t.row,align:"right"},e.amountOfShares),r.a.createElement(_.a,{className:t.row,align:"right"},e.price))}))))),r.a.createElement(D.a,{className:t.tablePagination,rowsPerPageOptions:[5,10,25],component:"div",count:y.length,rowsPerPage:b,page:p,onChangePage:function(e,t){h(t)},onChangeRowsPerPage:function(e){f(parseInt(e.target.value,10)),h(0)}})))};function bt(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var ft=[{id:"username",numeric:!1,disablePadding:!1,label:"Username"},{id:"#OfTrades",numeric:!0,disablePadding:!1,label:"Total Trades"},{id:"tournamentBalance",numeric:!0,disablePadding:!1,label:"Tournament Balance"}];function yt(e){var t=e.classes,a=e.order,n=e.orderBy,o=(e.rowCount,e.onRequestSort);return r.a.createElement(M.a,null,r.a.createElement(L.a,{className:t.tableHead},ft.map((function(e){return r.a.createElement(_.a,{key:e.id,align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:n===e.id&&a},r.a.createElement(U.a,{active:n===e.id,direction:n===e.id?a:"asc",onClick:(l=e.id,function(e){o(e,l)})},e.label,n===e.id?r.a.createElement("span",{className:t.visuallyHidden},"desc"===a?"sorted descending":"sorted ascending"):null));var l}))))}var vt=Object(N.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},tableHead:{fontWeight:"bold",backgroundColor:e.palette.primary.main,color:e.palette.text.secondary,width:"100%"},row:{fontWeight:"bold",color:e.palette.primary.dark},tablePagination:{color:e.palette.primary.dark}}})),Tt=function(e){var t=vt(),a=r.a.useState("asc"),n=Object(x.a)(a,2),o=n[0],l=n[1],c=r.a.useState("tournamentBalance"),i=Object(x.a)(c,2),s=i[0],u=i[1],d=r.a.useState(0),m=Object(x.a)(d,2),p=m[0],h=m[1],g=r.a.useState(5),E=Object(x.a)(g,2),b=E[0],v=E[1],T=e.data.map((function(e){return{username:e.user.username,tournamentBalance:(Math.round(100*e.tournamentBalance)/100).toFixed(2),numOfTrades:e.trades.length,avatar:e.user.avatar}}));return r.a.createElement("div",{className:t.root},r.a.createElement(Y.a,{className:t.paper},r.a.createElement(A.a,null,r.a.createElement(P.a,{className:t.table,"aria-labelledby":"tableTitle","aria-label":"enhanced table"},r.a.createElement(yt,{classes:t,order:o,orderBy:s,onRequestSort:function(e,t){l(s===t&&"asc"===o?"desc":"asc"),u(t)},rowCount:T.length}),r.a.createElement(B.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(T,function(e,t){return"desc"===e?function(e,a){return bt(e,a,t)}:function(e,a){return-bt(e,a,t)}}(o,s)).slice(p*b,p*b+b).map((function(e,a){return r.a.createElement(L.a,{hover:!0,role:"checkbox",tabIndex:-1,key:a},r.a.createElement(_.a,{className:t.row,component:"th",scope:"row"},r.a.createElement(f.a,{container:!0,alignItems:"flex-start",direction:"row"},r.a.createElement(R.a,{src:e.avatar}),r.a.createElement(y.a,{variant:"h5",style:{marginTop:10,paddingLeft:10}},e.username))),r.a.createElement(_.a,{className:t.row,align:"right"},e.numOfTrades),r.a.createElement(_.a,{className:t.row,align:"right"},e.tournamentBalance))}))))),r.a.createElement(D.a,{className:t.tablePagination,rowsPerPageOptions:[5,10,25],component:"div",count:T.length,rowsPerPage:b,page:p,onChangePage:function(e,t){h(t)},onChangeRowsPerPage:function(e){v(parseInt(e.target.value,10)),h(0)}})))},Ct=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={modalOpen:!1,error:null,stockData:[{id:"IBM",data:[{x:"2020-06-01",y:1}]}],stockInfo:{symbol:"IBM"},currentSearch:"IBM",timeFunction:"TIME_SERIES_DAILY",intradayInterval:"1min",currentPrice:"loading",currentView:"buy/sell",xScaleFormat:"%Y-%m-%d",xFormat:"time:%Y-%m-%d"},e.getPriceData=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"IBM",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=e.formatPriceQuery(t,a,n);fetch(r).then((function(e){return e.json()})).then((function(a){if(a["Error Message"])e.setState({error:a["Error Message"]});else{var r=a[Object.keys(a)[1]],o=Object.keys(r).map((function(e){return{x:e,y:parseFloat(r[e]["4. close"])}}));fetch("https://www.alphavantage.co/query?function=OVERVIEW&symbol=".concat(t,"&apikey=3VP9375JIOYD1569")).then((function(e){return e.json()})).then((function(a){fetch("https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=".concat(t,"&apikey=3VP9375JIOYD1569")).then((function(e){return e.json()})).then((function(r){var l="%Y-%m-%d",c="time:%Y-%m-%d";""!==n&&(l="%Y-%m-%d %H:%M:%S",c="time:%Y-%m-%d %H:%M:%S"),e.setState({error:null,stockData:[{id:t,data:o}],stockInfo:{symbol:a.Symbol,name:a.Name,exchange:a.Exchange,sector:a.Sector},currentPrice:r["Global Quote"]["05. price"],xFormat:c,xScaleFormat:l})}))}))}}))},e.handleGetCurrentEntry=Object(ue.a)(se.a.mark((function t(){return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.getEntryByUsernameAndTournamentName(localStorage.userId,e.props.match.params.id);case 2:return t.next=4,e.props.getTradesByEntryId(e.props.currentEntry._id);case 4:case"end":return t.stop()}}),t)}))),e.setPrice=function(t){e.setState({currentPrice:parseFloat(t)})},e.handleSearchSubmit=function(t){void 0!==t&&(e.setState({currentSearch:t}),e.getPriceData(t,e.state.timeFunction))},e.handleChangeTimeFunction=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log("handle change time"),""===a?e.getPriceData(e.state.currentSearch,t):e.getPriceData(e.state.currentSearch,t,a)},e.formatPriceQuery=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return"TIME_SERIES_INTRADAY"!==t?"https://www.alphavantage.co/query?function=".concat(t,"&symbol=").concat(e,"&outputsize=compact&apikey=3VP9375JIOYD1569"):"https://www.alphavantage.co/query?function=".concat(t,"&symbol=").concat(e,"&interval=").concat(a,"&apikey=3VP9375JIOYD1569")},e.changeView=function(t){e.setState({currentView:t})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getPriceData("IBM","TIME_SERIES_DAILY"),this.props.getEntriesByTournamentId(this.props.match.params.id),localStorage.userId&&this.handleGetCurrentEntry()}},{key:"render",value:function(){var e,t=this,a=this.props.classes;return r.a.createElement("div",null,r.a.createElement(dt,{setView:this.changeView}),"buy/sell"===this.state.currentView?r.a.createElement("div",{style:{width:"95%",margin:"auto"}},r.a.createElement(f.a,{container:!0},r.a.createElement(f.a,{item:!0,className:a.searchBar},r.a.createElement(Ge,{handleSearchSubmit:this.handleSearchSubmit,error:this.state.error})),r.a.createElement(f.a,{container:!0},this.state.stockInfo?r.a.createElement(f.a,(e={container:!0,item:!0,justify:"space-between"},Object(Ie.a)(e,"item",!0),Object(Ie.a)(e,"xs",6),e),r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(y.a,{variant:"h5",className:a.stockInfo},this.state.stockInfo.name),r.a.createElement(y.a,{style:{marginLeft:10},variant:"h6",className:a.stockInfo},this.state.stockInfo.symbol)),r.a.createElement("div",null,r.a.createElement(y.a,null,this.state.stockInfo.sector)))):null,r.a.createElement(f.a,{container:!0,item:!0,xs:6,style:{marginTop:30},alignItems:"flex-start",justify:"flex-end",direction:"row"},r.a.createElement(X.a,{onClick:function(){return t.handleChangeTimeFunction("TIME_SERIES_MONTHLY")}},"Monthly"),r.a.createElement(X.a,{onClick:function(){return t.handleChangeTimeFunction("TIME_SERIES_WEEKLY")}},"Weekly"),r.a.createElement(X.a,{onClick:function(){return t.handleChangeTimeFunction("TIME_SERIES_DAILY")}},"Daily"),r.a.createElement(X.a,{onClick:function(){return t.handleChangeTimeFunction("TIME_SERIES_INTRADAY","60min")}},"Hourly"),r.a.createElement(X.a,{onClick:function(){return t.handleChangeTimeFunction("TIME_SERIES_INTRADAY","15min")}},"15 min"))),r.a.createElement(f.a,{item:!0,xs:12,className:a.chartContainer},r.a.createElement(ze,{stockInfo:this.state.stockInfo,data:this.state.stockData,xFormat:this.state.xFormat,xScaleFormat:this.state.xScaleFormat})),this.props.currentEntry&&!this.props.currentEntry.message?r.a.createElement(f.a,{container:!0,item:!0,xs:12},r.a.createElement(f.a,{item:!0,xs:6,style:{marginTop:10}},r.a.createElement(at,{getCurrentEntry:this.handleGetCurrentEntry,createdTrade:this.props.createdTrade,currentEntry:this.props.currentEntry,currentPrice:this.state.currentPrice,stockTicker:this.state.stockInfo.symbol,entryId:this.props.currentEntry._id||null})),r.a.createElement(f.a,{container:!0,item:!0,alignItems:"flex-start",justify:"flex-end",direction:"row",xs:6},r.a.createElement(nt,{searchString:this.state.stockInfo.symbol,setPrice:this.setPrice,currentPrice:this.state.currentPrice})),r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(it,{tradeData:this.props.tradeData}))):null)):null,"tradeHistory"===this.state.currentView?r.a.createElement("div",null,r.a.createElement(Et,{data:this.props.tradeData.tradesByEntry})):null,"allEntrants"===this.state.currentView?r.a.createElement("div",null,r.a.createElement(Tt,{data:this.props.entries})):null)}}]),a}(r.a.Component),Ot=Object(d.b)((function(e){return{currentEntry:e.entry.currentEntry,entries:e.entry.tournamentEntries,currentUser:e.auth.currentUser,createdTrade:e.trade.createdTrade,tradeData:e.trade}}),{getEntryByUsernameAndTournamentName:function(e,t){return function(a){return a({type:"FETCH_ENTRY_INFORMATION_BEGIN"}),fetch("http://localhost:3000/api/entries/".concat(e,"/").concat(t)).then((function(e){return e.json()})).then((function(e){return console.log(e),a(function(e){return{type:"FETCH_ENTRY_INFORMATION_SUCCESS",payload:{entryInfo:e}}}(e)),e})).catch((function(e){a(function(e){return{type:"FETCH_ENTRY_INFORMATION_FAILURE",payload:{err:e}}}(e))}))}},getTradesByEntryId:Ue,getEntriesByTournamentId:function(e){return function(t){return t({type:"FETCH_ENTRIES_BY_TOURNAMENT_ID_BEGIN"}),fetch("http://localhost:3000/api/entries/tournament/".concat(e)).then((function(e){return e.json()})).then((function(e){t(function(e){return{type:"FETCH_ENTRIES_BY_TOURNAMENT_ID_SUCCESS",payload:{entriesArr:e}}}(e))})).catch((function(e){return t(function(e){return{type:"FETCH_ENTRIES_BY_TOURNAMENT_ID_FAILURE",payload:{error:e}}}(e))}))}}})(Object(de.a)((function(e){return{searchBar:{backgroundColor:e.palette.primary.main,width:"100%",marginTop:30,marginBottom:30},chartContainer:{backgroundColor:e.palette.primary.dark,borderRadius:5}}}),{withTheme:!0})(Ct)),St=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root},r.a.createElement(st.a,{position:"static",className:e.nav},r.a.createElement(H.a,null,r.a.createElement(y.a,{component:m.b,to:"/lobby",variant:"h4",color:"textPrimary",className:e.title},"STONKKINGS"),r.a.createElement(y.a,{component:m.b,to:"/lobby",variant:"h6",color:"textPrimary",className:e.title},"Lobby"),r.a.createElement(y.a,{component:m.b,to:"/my-tournaments",variant:"h6",color:"textPrimary",className:e.title},"My Tournaments"),r.a.createElement(y.a,{component:m.b,to:"/leaderboard",variant:"h6",color:"textPrimary",className:e.title},"Leaderboard"),r.a.createElement("div",{style:{flexGrow:1}},r.a.createElement(X.a,{variant:"outlined",color:"secondary",component:m.b,to:"/create-tournament"},"Create a Tournament")),this.props.currentUser&&!this.props.currentUser.message?r.a.createElement("div",null,r.a.createElement(f.a,{container:!0,className:e.userContainer},r.a.createElement(f.a,{item:!0,xs:4}),r.a.createElement(f.a,{item:!0,xs:2},r.a.createElement(R.a,{src:this.props.currentUser.avatar})),r.a.createElement(f.a,{item:!0,xs:3,className:e.username},r.a.createElement(y.a,{style:{fontWeight:"bold"},variant:"h6",align:"left"},this.props.currentUser.username)),r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(y.a,{className:e.credits,align:"right",variant:"h6",color:"textPrimary"},"Stonk Credits: ",this.props.currentUser.accountBalance)))):r.a.createElement(X.a,{className:e.loginButton,variant:"contained",component:m.b,to:"/login"},"Login"))))}}]),a}(r.a.Component),kt=Object(d.b)((function(e){return{currentUser:e.auth.currentUser}}))(Object(de.a)((function(e){return{root:{flexGrow:1},nav:{backgroundColor:e.palette.primary.dark},menuButton:{marginRight:e.spacing(2)},title:{fontWeight:"bold",textDecoration:"none",marginRight:30},userContainer:{padding:10,alignContent:"right"},username:{paddingTop:10},credits:{paddingLeft:5},loginButton:{backgroundColor:e.palette.text.primary}}}),{withTheme:!0})(St)),Nt=Object(N.a)((function(e){return{dialogBox:{backgroundColor:e.palette.primary.light},title:{backgroundColor:e.palette.primary.dark},textContainer:{display:"flex"},text:{fontWeight:"bold",color:e.palette.primary.dark},lobbyButton:{width:"100%",fontWeight:"bold",backgroundColor:e.palette.primary.dark,color:e.palette.text.secondary,"&:hover":{backgroundColor:e.palette.text.primary}},createButton:{backgroundColor:e.palette.text.primary,color:e.palette.primary.dark,"&:hover":{backgroundColor:e.palette.primary.dark,color:e.palette.text.secondary}},cancelButton:{backgroundColor:e.palette.primary.main}}})),wt=function(e){var t=Nt(),a=Object(p.f)();return console.log(e),r.a.createElement("div",null,r.a.createElement(pe.a,{open:e.open,onClose:e.handleModal},r.a.createElement(f.a,{container:!0,className:t.dialogBox},e.createTournamentSuccess?r.a.createElement("div",null,r.a.createElement(f.a,{item:!0,xs:12,className:t.title},r.a.createElement(me.a,{id:"simple-dialog-title"},"Tournament Successfully Created!")),r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(he.a,null,r.a.createElement(X.a,{className:t.lobbyButton,onClick:function(){return a.push("/lobby")},variant:"contained"},"Go to lobby!")))):r.a.createElement("div",null,r.a.createElement(f.a,{item:!0,xs:12,className:t.title},r.a.createElement(me.a,{id:"simple-dialog-title"},"Create Tournament")),r.a.createElement(f.a,{item:!0,container:!0,xs:12},r.a.createElement(ge.a,null,r.a.createElement(Ee.a,{className:t.text},"Tournament Name: ",e.tournamentName),r.a.createElement(Ee.a,{className:t.text},"Max Entries: ",e.entryLimit),r.a.createElement(Ee.a,{className:t.text},"Entry Fee: ",e.entryFee),r.a.createElement(Ee.a,{className:t.text},"Start Time: ",e.startTime),r.a.createElement(Ee.a,{className:t.text},"End Time: ",e.endTime))),r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(he.a,null,r.a.createElement(X.a,{className:t.cancelButton,variant:"outlined",onClick:e.handleModal},"Cancel"),r.a.createElement(X.a,{className:t.createButton,variant:"primary",onClick:e.createTournament},"Create")))))))},It=a(305),jt=a(36),xt=a(603),Ft=a(619),Pt=a(302),Rt=a.n(Pt),Bt=function(e){return r.a.createElement(jt.a,{utils:It.a},r.a.createElement(f.a,{container:!0},r.a.createElement(f.a,{item:!0,xs:6,style:{padding:5}},r.a.createElement(xt.a,{style:{width:"100%"},InputLabelProps:{style:{color:"white"}},margin:"normal",id:e.dateLabel,label:e.dateLabel,format:"MM/dd/yyyy",value:e.dateValue,onChange:function(t){return e.handleChangeTime(t,"selectedDateFor".concat(e.name))},KeyboardButtonProps:{"aria-label":"change date"}})),r.a.createElement(f.a,{item:!0,xs:6,style:{padding:5}},r.a.createElement(Ft.a,{style:{width:"100%"},InputLabelProps:{style:{color:"white"}},margin:"normal",id:e.timeLabel,label:e.timeLabel,value:e.timeValue,onChange:function(t){return e.handleChangeTime(t,"selectedTimeFor".concat(e.name))},KeyboardButtonProps:{"aria-label":"change time"}}))))},_t=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={modalOpen:!1,createTournamentLoading:!1,createTournamentSuccess:null,tournamentName:"",entryLimit:20,entryFee:100,selectedDateForStart:new Date,selectedTimeForStart:new Date,selectedDateForEnd:new Date,selectedTimeForEnd:new Date},e.handleModal=function(){e.setState({modalOpen:!e.state.modalOpen,createTournamentSuccess:!1})},e.handleChangeTime=function(t,a){e.setState(Object(Ie.a)({},a,t))},e.handleChange=function(t){e.setState(Object(Ie.a)({},t.target.name,t.target.value))},e.formatTime=function(e,t){return new Date("".concat(["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()]," ").concat(e.getDate(),", ").concat(e.getFullYear()," ").concat(t.getHours(),":").concat(t.getMinutes(),":").concat(t.getSeconds())).toString()},e.createTournamentFetch=function(){e.setState({createTournamentLoading:!0}),fetch("http://localhost:3000/api/tournaments",{method:"POST",headers:{"Content-type":"application/json","x-access-token":localStorage.token},body:JSON.stringify({name:e.state.tournamentName,entryFee:e.state.entryFee,entryLimit:e.state.entryLimit,startTime:e.formatTime(e.state.selectedDateForStart,e.state.selectedTimeForStart),endTime:e.formatTime(e.state.selectedDateForEnd,e.state.selectedTimeForEnd)})}).then((function(e){return e.json()})).then((function(t){e.setState({createTournamentLoading:!1,createTournamentSuccess:!0}),console.log("created",t)})).catch(console.log)},e}return Object(i.a)(a,[{key:"render",value:function(){var e;console.log(this.state);var t=this.props.classes;return r.a.createElement(f.a,{container:!0,className:t.paper},r.a.createElement(f.a,{className:t.titleContainer,item:!0,xs:12,container:!0,direction:"row",alignItems:"center"},r.a.createElement(f.a,{item:!0,className:t.title},r.a.createElement(y.a,{color:"",variant:"h4"},"Tournament Details")),r.a.createElement(f.a,{item:!0},r.a.createElement(R.a,{className:t.avatar},r.a.createElement(Rt.a,null)))),r.a.createElement(xe.a,{style:{margin:5},color:"primary",value:this.state.name,onChange:this.handleChange,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"tournamentName",label:"Tournament Name",name:"tournamentName",autoFocus:!0,InputLabelProps:{classes:{root:t.cssLabel,focused:t.cssFocused}},InputProps:{classes:{root:t.cssOutlinedInput,focused:t.cssFocused,notchedOutline:t.notchedOutline}}}),r.a.createElement(f.a,{item:!0,xs:6,style:{padding:5}},r.a.createElement(xe.a,{fullWidth:!0,value:this.state.entryLimit,onChange:this.handleChange,variant:"outlined",type:"number",margin:"normal",required:!0,name:"entryLimit",label:"Max Players",id:"",InputLabelProps:{classes:{root:t.cssLabel,focused:t.cssFocused}},InputProps:{classes:{root:t.cssOutlinedInput,focused:t.cssFocused,notchedOutline:t.notchedOutline}}})),r.a.createElement(f.a,{item:!0,xs:6,style:{padding:5}},r.a.createElement(xe.a,(e={InputLabelProps:{style:{color:"white"}},value:this.state.entryFee,fullWidth:!0,onChange:this.handleChange,variant:"outlined",type:"number",margin:"normal",required:!0,name:"entryFee",label:"Entry Fee"},Object(Ie.a)(e,"InputLabelProps",{classes:{root:t.cssLabel,focused:t.cssFocused}}),Object(Ie.a)(e,"InputProps",{classes:{root:t.cssOutlinedInput,focused:t.cssFocused,notchedOutline:t.notchedOutline}}),Object(Ie.a)(e,"id",""),e))),r.a.createElement(Bt,{name:"Start",dateLabel:"Choose start date",timeLabel:"Choose start time",dateValue:this.state.selectedDateForStart,timeValue:this.state.selectedTimeForStart,handleChangeTime:this.handleChangeTime}),r.a.createElement(Bt,{name:"End",dateLabel:"Choose end date",timeLabel:"Choose end time",dateValue:this.state.selectedDateForEnd,timeValue:this.state.selectedTimeForEnd,handleChangeTime:this.handleChangeTime}),r.a.createElement(X.a,{onClick:this.handleModal,fullWidth:!0,variant:"contained",className:t.submit},"Create Tournament"),r.a.createElement(wt,{createTournamentLoading:this.state.createTournamentLoading,createTournamentSuccess:this.state.createTournamentSuccess,open:this.state.modalOpen,handleModal:this.handleModal,createTournament:this.createTournamentFetch,tournamentName:this.state.tournamentName,entryLimit:this.state.entryLimit,entryFee:this.state.entryFee,startTime:this.formatTime(this.state.selectedDateForStart,this.state.selectedTimeForStart),endTime:this.formatTime(this.state.selectedDateForEnd,this.state.selectedTimeForEnd)}))}}]),a}(r.a.Component),At=Object(de.a)((function(e){return{paper:{marginTop:e.spacing(8),backgroundColor:e.palette.primary.main,borderRadius:10,padding:20,width:600,margin:"auto"},titleContainer:{marginLeft:"22%",marginBottom:10},avatar:{backgroundColor:e.palette.secondary.main},title:{marginRight:10,color:e.palette.text.secondary},form:{width:"100%",marginTop:e.spacing(1)},submit:{marginTop:20,backgroundColor:e.palette.primary.dark,color:e.palette.text.secondary,"&:hover":{backgroundColor:e.palette.text.primary}},cssOutlinedInput:{"&$cssFocused $notchedOutline":{borderColor:"".concat(e.palette.text.primary," !important")}},cssLabel:{color:"white"},cssFocused:{},notchedOutline:{borderWidth:"1px",borderColor:"".concat(e.palette.primary.dark," !important")}}}),{withTheme:!0})(_t),Mt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loggedIn:!1},e.logIn=function(){e.setState({loggedIn:!0})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){localStorage.token&&this.props.loginWithToken(localStorage.token)}},{key:"render",value:function(){var e=this;console.log(this.state);var t=this.props.classes;return r.a.createElement("div",{className:t.app},r.a.createElement(m.a,null,this.state.loggedIn||localStorage.token?r.a.createElement(kt,null):null,r.a.createElement("div",{className:t.mainContainer},r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/lobby",render:function(e){return r.a.createElement(we,e)}}),r.a.createElement(p.a,{exact:!0,path:"/",render:function(t){return r.a.createElement(Le,Object.assign({logIn:e.logIn},t))}}),r.a.createElement(p.a,{exact:!0,path:"/my-tournaments",render:function(e){return r.a.createElement(ce,e)}}),r.a.createElement(p.a,{exact:!0,path:"/leaderboard",render:function(e){return r.a.createElement($,e)}}),r.a.createElement(p.a,{exact:!0,path:"/create-tournament",render:function(e){return r.a.createElement(At,e)}}),r.a.createElement(p.a,{exact:!0,path:"/tournament/:id",render:function(t){return r.a.createElement(Ot,Object.assign({},t,{currentUser:e.props.currentUser}))}}))),this.state.loggedIn||localStorage.token?r.a.createElement(j,null):null))}}]),a}(r.a.Component),Dt=Object(d.b)((function(e){return{currentUser:e.auth.currentUser}}),{loginWithToken:b})(Object(de.a)((function(e){return{root:{flexGrow:1},app:{minHeight:"100vh",backgroundColor:e.palette.primary.light},mainContainer:{height:"85vh"}}}),{withTheme:!0})(Mt)),Lt=a(87),Ut=a(303),Ht={currentUser:null,loggedIn:!1,loading:!1,error:null},Yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USER_INFORMATION_BEGIN":return Object(h.a)(Object(h.a)({},e),{},{loading:!0,error:null});case"FETCH_USER_INFORMATION_SUCCESS":return{loading:!1,loggedIn:!0,error:!1,currentUser:t.payload.userInfo};case"FETCH_USER_INFORMATION_FAILURE":return Object(h.a)(Object(h.a)({},e),{},{loading:!1,error:t.payload.error});default:return e}},Wt={tournamentsArr:[],loadingTournaments:!1,tournamentsError:null,tournamentById:{},loadingTournamentById:!1,tournamentByIdError:null},Gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_TOURNAMENTS_BEGIN":return Object(h.a)(Object(h.a)({},e),{},{loadingTournaments:!0,tournamentsError:null});case"FETCH_TOURNAMENTS_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{loadingTournaments:!1,tournamentsArr:t.payload.tournamentsArr});case"FETCH_TOURNAMENTS_FAILURE":return Object(h.a)(Object(h.a)({},e),{},{loadingTournaments:!1,tournamentsError:t.payload.error});default:return e}},Vt={createdEntry:null,currentEntry:null,tournamentEntries:[],loadingCurrentEntry:!1,loadingCreatedEntry:!1,loadingTournamentEntries:!1,currentEntryError:null,createdEntryError:null,tournamentEntriesError:null},qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ENTRY_INFORMATION_BEGIN":return Object(h.a)(Object(h.a)({},e),{},{loadingCurrentEntry:!0,currentEntryError:null});case"FETCH_ENTRY_INFORMATION_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{loadingCurrentEntry:!1,currentEntry:t.payload.entryInfo,currentEntryError:!1});case"FETCH_ENTRY_INFORMATION_FAILURE":return Object(h.a)(Object(h.a)({},e),{},{loadingCurrentEntry:!1,currentEntryError:t.payload.error});case"CREATE_ENTRY_BEGIN":return Object(h.a)(Object(h.a)({},e),{},{loadingCreatedEntry:!0,createdEntryError:null});case"CREATE_ENTRY_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{loadingCreatedEntry:!1,createdEntry:t.payload.entryInfo,createdEntryError:!1});case"CREATE_ENTRY_FAILURE":return Object(h.a)(Object(h.a)({},e),{},{loadingCreatedEntry:!1,createdEntryError:t.payload.error});case"FETCH_ENTRIES_BY_TOURNAMENT_ID_BEGIN":return Object(h.a)(Object(h.a)({},e),{},{loadingTournamentEntries:!0,tournamentEntriesError:null});case"FETCH_ENTRIES_BY_TOURNAMENT_ID_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{loadingTournamentEntries:!1,tournamentEntries:t.payload.entriesArr,tournamentEntriesError:!1});case"FETCH_ENTRIES_BY_TOURNAMENT_ID_FAILURE":return Object(h.a)(Object(h.a)({},e),{},{loadingTournamentEntries:!1,tournamentEntriesError:t.payload.error});default:return e}},zt={createdTrade:[],tradesByEntry:[],loadingCreatedTrade:!1,loadingTradeByEntryArr:!1,createTradeErr:null,tradesByEntryErr:null},Jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_TRADE_BEGIN":return Object(h.a)(Object(h.a)({},e),{},{loadingCreatedTrade:!0});case"CREATE_TRADE_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{loadingCreatedTrade:!1,createdTrade:t.payload.tradeInfo});case"CREATE_TRADE_FAILURE":return Object(h.a)(Object(h.a)({},e),{},{loadingCreatedTrade:!1,createTradeErr:t.payload.error});case"FETCH_TRADES_BY_ENTRY_BEGIN":return Object(h.a)(Object(h.a)({},e),{},{loadingTradeByEntryArr:!0});case"FETCH_TRADES_BY_ENTRY_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{loadingTradeByEntryArr:!1,tradesByEntry:t.payload.tradesByEntry});case"FETCH_TRADES_BY_ENTRY_FAILURE":return Object(h.a)(Object(h.a)({},e),{},{loadingTradeByEntryArr:!1,tradesByEntryErr:t.payload.err});default:return e}},Kt=Object(Lt.combineReducers)({auth:Yt,tournament:Gt,entry:qt,trade:Jt}),$t=a(304),Qt=Object(Lt.createStore)(Kt,Object(Ut.composeWithDevTools)(Object(Lt.applyMiddleware)($t.a))),Xt=a(306),Zt=a(604),ea=Object(Xt.a)({palette:{primary:{main:"#484848",dark:"#000000"},secondary:{main:"#d84315"},text:{primary:"#64dd17",secondary:"#fafafa"}}});l.a.render(r.a.createElement(Zt.a,{theme:ea},r.a.createElement(d.a,{store:Qt},r.a.createElement(Dt,null))),document.getElementById("root"))}},[[333,1,2]]]);
//# sourceMappingURL=main.13d9374e.chunk.js.map